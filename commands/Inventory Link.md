These commands will link the inventories of all players on the server, as seen in [this video](https://youtube.com/shorts/L9B5HDURruQ). These commands were written in version 26.1, and will not work in prior versions.

The contraption will not activate unless these two commands are run first, to create the scoreboard objectives.
```
/scoreboard objectives add inventory_changed dummy
```
```
/scoreboard objectives add equipment_changed dummy
```

Only the first two are necessary for linking the main inventory slots, but the last 4 are necessary for syncing armor slots and offhand slots, too. Ensure the commands are in the same command chain in the correct order from top to bottom (in a loaded chunk).
```
execute positioned 0 0 0 as @a[sort=nearest] store result score @s inventory_changed run data modify storage inventory_link Inventory set from entity @s Inventory
```
```
execute positioned 0 0 0 as @p[scores={inventory_changed=1..}] run loot replace entity @a container.0 loot {pools:[{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.0:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.0"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.1:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.1"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.2:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.2"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.3:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.3"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.4:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.4"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.5:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.5"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.6:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.6"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.7:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.7"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.8:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.8"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.9:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.9"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.10:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.10"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.11:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.11"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.12:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.12"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.13:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.13"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.14:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.14"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.15:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.15"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.16:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.16"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.17:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.17"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.18:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.18"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.19:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.19"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.20:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.20"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.21:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.21"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.22:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.22"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.23:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.23"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.24:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.24"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.25:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.25"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.26:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.26"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.27:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.27"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.28:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.28"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.29:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.29"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.30:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.30"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.31:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.31"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.32:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.32"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.33:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.33"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.34:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.34"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{slots:{container.35:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"container.35"}}]}]}]}
```
```
execute positioned 0 0 0 as @a[sort=nearest] store result score @s equipment_changed run data modify storage inventory_link equipment set from entity @s equipment
```
```
execute positioned 0 0 0 unless entity @a[scores={equipment_changed=1..}] as @a[sort=nearest] store result score @s equipment_changed unless data entity @s equipment if data storage inventory_link equipment run data remove storage inventory_link equipment
```
```
execute positioned 0 0 0 as @p[scores={equipment_changed=1..}] run loot replace entity @a armor.feet loot {pools:[{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{equipment:{feet:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"armor.feet"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{equipment:{legs:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"armor.legs"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{equipment:{chest:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"armor.chest"}}]}]},{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{equipment:{head:{items:"minecraft:air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"armor.head"}}]}]}]}
```
```
execute positioned 0 0 0 as @p[scores={equipment_changed=1..}] run loot replace entity @a weapon.offhand loot {pools:[{rolls:1,entries:[{type:"minecraft:alternatives",children:[{type:"minecraft:item",name:"minecraft:tnt",conditions:[{condition:"minecraft:entity_properties",entity:"this",predicate:{equipment:{offhand:{items:"air"}}}}],functions:[{function:"minecraft:discard"}]},{type:"minecraft:slots",slot_source:{type:"minecraft:slot_range",source:"this",slots:"weapon.offhand"}}]}]}]}
```
